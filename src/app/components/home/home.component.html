<main class="bg-background">
  <!-- Principal Section -->
  <section
    class="relative min-h-screen flex flex-col items-center justify-center overflow-hidden bg-ivory px-4 md:px-6 py-12 md:py-16 hero-section"
  >
    <div
      class="absolute inset-0 parallax-bg"
      style="
        background-image: url('assets/IMG_9478.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        opacity: 0.3;
      "
    ></div>
    <div
      class="relative z-10 text-center max-w-4xl mx-auto flex flex-col items-center align-center"
    >
      <div class="mb-6 md:mb-8 animate-on-scroll animate-fade-up">
        <h1 class="font-script text-4xl md:text-6xl text-ink mb-2">
          Nos casamos
        </h1>
      </div>
      <div class="max-w-2xl mx-auto mb-8 md:mb-12 px-2 animate-on-scroll animate-fade-up delay-200">
        <h2 class="font-display text-2xl md:text-5xl text-ink mb-4 md:mb-6">
          {{ brideName }} <span class="text-sage-dark">&</span> {{ groomName }}
        </h2>
        <p
          class="text-ink text-xs md:text-base leading-relaxed font-body text-center mb-4 md:mb-6"
        >
          Estamos súper ilusionados de poder compartir este día tan especial con
          vosotros. Después de años de risas, aventuras y momentos inolvidables,
          estamos listos para dar el siguiente paso en nuestro camino juntos—y
          no podemos imaginarlo sin las personas que más queremos a nuestro
          lado.
        </p>
        <p
          class="text-ink-light text-lg md:text-2xl font-display tracking-wide text-center"
        >
          {{ weddingDateDisplay }}
        </p>
      </div>
    </div>
    <button
      (click)="scrollToRsvp()"
      class="absolute bottom-8 inset-x-0 z-10 flex flex-col items-center gap-2 text-center text-ink hover:text-ink/80 transition-colors cursor-pointer bg-transparent border-0 p-0 text-base font-normal"
    >
      <span class="text-xs tracking-[0.3em] uppercase font-body"
        >Confirma tu asistencia</span
      >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="w-5 h-5 chevron-bounce"
      >
        <path d="m6 9 6 6 6-6"></path>
      </svg>
    </button>
  </section>

  <!-- Countdown Section -->
  <section class="section-padding bg-ivory">
    <div class="max-w-4xl mx-auto px-2 flex flex-col items-center w-full">
      <h2
        class="font-script text-3xl md:text-5xl text-ink mb-2 w-full text-center animate-on-scroll animate-fade-up"
      >
        Cuenta atrás
      </h2>
      <p
        class="text-ink/70 text-sm md:text-lg font-body tracking-wide mb-8 md:mb-12 w-full text-center animate-on-scroll animate-fade-up delay-100"
      >
        Para el día más especial de nuestras vidas
      </p>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-8 w-full">
        <div
          class="bg-ink/10 backdrop-blur-sm p-4 md:p-8 border border-ink/20 rounded-lg animate-on-scroll animate-scale delay-100"
        >
          <span
            class="block font-display text-2xl md:text-6xl font-light text-ink"
            >{{ countdown.days | number : "3.0-0" }}</span
          >
          <span
            class="block mt-2 text-xs tracking-[0.2em] uppercase text-ink/70 font-body"
            >Días</span
          >
        </div>
        <div
          class="bg-ink/10 backdrop-blur-sm p-4 md:p-8 border border-ink/20 rounded-lg animate-on-scroll animate-scale delay-200"
        >
          <span
            class="block font-display text-2xl md:text-6xl font-light text-ink"
            >{{ countdown.hours | number : "2.0-0" }}</span
          >
          <span
            class="block mt-2 text-xs tracking-[0.2em] uppercase text-ink/70 font-body"
            >Horas</span
          >
        </div>
        <div
          class="bg-ink/10 backdrop-blur-sm p-4 md:p-8 border border-ink/20 rounded-lg animate-on-scroll animate-scale delay-300"
        >
          <span
            class="block font-display text-2xl md:text-6xl font-light text-ink"
            >{{ countdown.minutes | number : "2.0-0" }}</span
          >
          <span
            class="block mt-2 text-xs tracking-[0.2em] uppercase text-ink/70 font-body"
            >Minutos</span
          >
        </div>
        <div
          class="bg-ink/10 backdrop-blur-sm p-4 md:p-8 border border-ink/20 rounded-lg animate-on-scroll animate-scale delay-400"
        >
          <span
            class="block font-display text-2xl md:text-6xl font-light text-ink"
            >{{ countdown.seconds | number : "2.0-0" }}</span
          >
          <span
            class="block mt-2 text-xs tracking-[0.2em] uppercase text-ink/70 font-body"
            >Segundos</span
          >
        </div>
      </div>
    </div>
  </section>

  <!-- Detalles Section -->
  <section class="section-padding bg-ivory">
    <div class="max-w-4xl mx-auto px-2 flex flex-col items-center w-full">
      <div class="text-center mb-12 w-full animate-on-scroll animate-fade-up">
        <h2 class="font-script text-3xl md:text-5xl text-ink mb-2">
          Detalles del día
        </h2>
        <p class="text-ink/70 font-body tracking-wide text-sm md:text-base">
          Todo lo que necesitas saber
        </p>
      </div>
      <div class="flex flex-col items-center text-center animate-on-scroll animate-fade-up delay-200">
          <div class="icon">
            <svg viewBox="0 0 24 24">
              <path
                d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"
              ></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
          </div>

        <h3 class="font-display text-xl md:text-2xl text-ink mb-4">
          {{ venue }}
        </h3>
        <div class="w-full max-w-md mx-auto mb-6">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d289174.33254999656!2d-4.060303391095847!3d40.36031821095481!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd41c67fc51eff7f%3A0x11f0564aff136bfe!2sFinca%20Condado%20de%20Cubillana!5e0!3m2!1ses!2ses!4v1767467852001!5m2!1ses!2ses"
            width="100%"
            height="200"
            style="border: 0; border-radius: 0.5rem"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          >
          </iframe>
          <button
            (click)="openGoogleMaps()"
            class="mt-3 w-full inline-flex items-center justify-center gap-2 px-4 py-2 text-xs md:text-sm font-medium rounded-md border border-ink/40 text-ink hover:bg-ink hover:text-white transition-colors border-radius-custom"
          >
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            Abrir en Google Maps
          </button>
        </div>
        <div class="space-y-3 mb-6">
          <div
            class="flex items-center justify-center gap-2 text-ink/70 text-sm md:text-base"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-4 h-4"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
            <span class="font-body">{{ eventTime }}</span>
          </div>
        </div>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <a
            (click)="addToCalendar()"
            class="inline-flex items-center justify-center whitespace-nowrap text-xs md:text-sm font-medium rounded-md px-4 py-2 gap-2 border border-ink/40 text-ink hover:bg-ink hover:text-white transition-colors cursor-pointer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="w-4 h-4"
            >
              <path d="M8 2v4"></path>
              <path d="M16 2v4"></path>
              <rect width="18" height="18" x="3" y="4" rx="2"></rect>
              <path d="M3 10h18"></path>
            </svg>
            Añadir al calendario
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Timeline section -->
  <section class="section-padding bg-ivory">
    <div class="max-w-5xl mx-auto px-2 flex flex-col items-center w-full">
      <div class="text-center mb-12 w-full animate-on-scroll animate-fade-up">
        <h2 class="font-script text-3xl md:text-5xl text-ink mb-2">
          Programa del día
        </h2>
        <p class="text-ink/70 font-body tracking-wide text-sm md:text-base">
          Lo que tenemos preparado para vosotros
        </p>
      </div>
      <div class="timeline">
        @for (event of timeline; track $index) {
        <div class="timeline-item">
          <span class="time">{{event.time}}</span>
          <div class="icon">
            <svg viewBox="0 0 24 24">
              <path
                *ngIf="event.icon === 'heart'"
                d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
              ></path>
              <path *ngIf="event.icon === 'wine'" d="M8 22h8"></path>
              <path *ngIf="event.icon === 'wine'" d="M7 10h10"></path>
              <path *ngIf="event.icon === 'wine'" d="M12 15v7"></path>
              <path
                *ngIf="event.icon === 'wine'"
                d="M12 15a5 5 0 0 0 5-5c0-2-.5-4-2-8H9c-1.5 4-2 6-2 8a5 5 0 0 0 5 5Z"
              ></path>
              <path *ngIf="event.icon === 'church'" d="M10 9h4"></path>
              <path *ngIf="event.icon === 'church'" d="M12 7v5"></path>
              <path
                *ngIf="event.icon === 'church'"
                d="M14 22v-4a2 2 0 0 0-4 0v4"
              ></path>
              @if (event.icon === 'ceremony') {
              <path d="M14 22v-4a2 2 0 0 0-4 0v4"></path>
              <path
                d="M18 22V5.618a1 1 0 0 0-.553-.894l-4.553-2.277a2 2 0 0 0-1.788 0L6.553 4.724A1 1 0 0 0 6 5.618V22"
              ></path>
              <path
                d="m18 7 3.447 1.724a1 1 0 0 1 .553.894V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9.618a1 1 0 0 1 .553-.894L6 7"
              ></path>

              } @if (event.icon === 'utensils') {
              <path
                d="m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8"
              ></path>
              <path
                d="M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7"
              ></path>
              <path d="m2.1 21.8 6.4-6.3"></path>
              <path d="m19 5-7 7"></path>
              } @if (event.icon === 'music') {
              <path d="M9 18V5l12-2v13" />
              <circle cx="6" cy="18" r="3" />
              <circle cx="18" cy="16" r="3" />
              }@if (event.icon === 'party') {
              <path d="M5.8 11.3 2 22l10.7-3.79"></path>
              <path d="M4 3h.01"></path>
              <path d="M22 8h.01"></path>
              <path d="M15 2h.01"></path>
              <path d="M22 20h.01"></path>
              <path
                d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"
              ></path>
              <path
                d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17"
              ></path>
              <path
                d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7"
              ></path>
              <path
                d="M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"
              ></path>
              }

              <!-- <path
                d="M12 21s-7-4.35-9.33-8.16C.87 9.69 2.4 6 6.25 6c2.04 0 3.18 1.23 3.75 2.11C10.57 7.23 11.71 6 13.75 6 17.6 6 19.13 9.69 21.33 12.84 19 16.65 12 21 12 21z"
              /> -->
            </svg>
          </div>
          <div>
            <h3>{{ event.title }}</h3>
            <p>{{ event.description }}</p>
          </div>
        </div>
        }
      </div>
    </div>
  </section>

  <!-- RSVP Section -->
  <section id="rsvp" class="section-padding bg-ivory">
    <div
      class="max-w-2xl mx-auto px-4 md:px-8 w-full flex flex-col items-center"
    >
      <div class="text-center mb-12 w-full animate-on-scroll animate-fade-up">
        <h2 class="font-script text-3xl md:text-5xl text-sage-dark mb-2">
          Confirma tu asistencia
        </h2>
        <p
          class="text-sage-dark/70 font-body tracking-wide text-sm md:text-base"
        >
          Esperamos contar contigo
        </p>
      </div>
      <form
        [formGroup]="rspvForm"
        class="bg-white/60 backdrop-blur-sm border border-sage/20 rounded-lg p-6 md:p-8 space-y-5 md:space-y-6 shadow-sm animate-on-scroll animate-scale delay-200"
      >
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-1"
            >Nombre completo *</label
          >
          <input
            type="text"
            required
            placeholder="Tu nombre"
            formControlName="name"
            class="w-full px-3 py-2 border border-sage/30 rounded-md bg-ivory text-sage-dark text-sm focus:outline-none focus:border-sage-dark"
          />
        </div>
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-1"
            >Email (opcional)</label
          >
          <input
            type="email"
            placeholder="tu@email.com"
            formControlName="email"
            class="w-full px-3 py-2 border border-sage/30 rounded-md bg-ivory text-sage-dark text-sm focus:outline-none focus:border-sage-dark"
          />
        </div>
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-2"
            >¿Asistirás? *</label
          >
          <div class="flex gap-4 md:gap-6 flex-wrap">
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="radio"
                name="attending"
                value="yes"
                formControlName="attending"
                checked
                class="w-4 h-4 border-sage-dark text-sage-dark"
              />
              <span class="text-xs md:text-sm text-sage-dark"
                >Sí, asistiré</span
              >
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="radio"
                name="attending"
                formControlName="attending"
                value="no"
                class="w-4 h-4 border-sage-dark text-sage-dark"
              />
              <span class="text-xs md:text-sm text-sage-dark"
                >No podré asistir</span
              >
            </label>
          </div>
        </div>
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-1"
            >Número de invitados</label
          >
          <input
            type="number"
            min="1"
            max="10"
            value="1"
            formControlName="guests"
            class="w-20 md:w-24 px-3 py-2 border border-sage/30 rounded-md bg-ivory text-sage-dark text-sm focus:outline-none focus:border-sage-dark"
          />
        </div>
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-2"
            >Tipo de menú</label
          >
          <div class="space-y-2">
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                value="vegano"
                (change)="onMenuTypeChange('vegano', $event)"
                class="w-4 h-4 border-sage-dark text-sage-dark"
              />
              <span class="text-xs md:text-sm text-sage-dark">Vegano</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                value="vegetariano"
                (change)="onMenuTypeChange('vegetariano', $event)"
                class="w-4 h-4 border-sage-dark text-sage-dark"
              />
              <span class="text-xs md:text-sm text-sage-dark">Vegetariano</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                value="celiaco"
                (change)="onMenuTypeChange('celiaco', $event)"
                class="w-4 h-4 border-sage-dark text-sage-dark"
              />
              <span class="text-xs md:text-sm text-sage-dark">Celíaco</span>
            </label>
            <label class="flex items-center gap-2 cursor-pointer">
              <input
                type="checkbox"
                value="otros"
                (change)="onMenuTypeChange('otros', $event)"
                class="w-4 h-4 border-sage-dark text-sage-dark"
              />
              <span class="text-xs md:text-sm text-sage-dark">Otros</span>
            </label>
            <div *ngIf="showOtherMenuField" class="ml-6">
              <input
                type="text"
                placeholder="Especifica..."
                formControlName="otherMenuType"
                class="w-full px-3 py-2 border border-sage/30 rounded-md bg-ivory text-sage-dark text-sm focus:outline-none focus:border-sage-dark"
              />
            </div>
          </div>
        </div>
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-2"
            >Transporte en bus *</label
          >
          <select
            formControlName="busRequired"
            class="w-full px-3 py-2 border border-sage/30 rounded-md bg-ivory text-sage-dark text-sm focus:outline-none focus:border-sage-dark"
          >
            <option value="">Selecciona una opción</option>
            <option value="leganes">Desde Leganés</option>
            <option value="madrid">Desde Madrid</option>
            <option value="no">No necesito, iré por mi cuenta</option>
          </select>
        </div>
        <div>
          <label
            class="text-xs md:text-sm font-medium text-sage-dark block mb-1"
            >Mensaje (opcional)</label
          >
          <textarea
            placeholder="Escríbenos unas palabras..."
            formControlName="message"
            rows="3"
            class="w-full px-3 py-2 border border-sage/30 rounded-md bg-ivory text-sage-dark text-sm focus:outline-none focus:border-sage-dark"
          ></textarea>
        </div>
        <button
          type="submit"
          (click)="onSubmit()"
          class="w-full px-4 py-3 text-sage-dark hover:text-sage-dark/70 font-medium transition-colors flex items-center justify-center gap-2 text-base border-b-2 border-sage-dark hover:border-sage-dark/70"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="w-4 h-4"
          >
            <path
              d="M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"
            ></path>
            <path d="m21.854 2.147-10.94 10.939"></path>
          </svg>
          Confirma tu asistencia
        </button>
      </form>
    </div>
  </section>

  <!-- Footer -->
  <footer class="py-12 md:py-16 bg-sage-dark text-center px-4">
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="24"
      height="24"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
      class="w-5 md:w-6 h-5 md:h-6 mx-auto mb-3 md:mb-4 text-white/70"
    >
      <path
        d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
      ></path>
    </svg>
    <p class="font-script text-2xl md:text-3xl text-white mb-2">
      {{ brideName }} <span class="text-gold">&</span> {{ groomName }}
    </p>
    <p class="text-xs md:text-sm text-white/80 font-body tracking-wide">
      {{ weddingDateDisplay }}
    </p>
    <p class="text-xs text-white/60 mt-6 md:mt-8 font-body">
      Con todo nuestro amor
    </p>
  </footer>

  <!-- Music Control Button -->
  <button
    class="music-control"
    (click)="toggleMusic()"
    [class.playing]="isMusicPlaying"
  >
    <svg *ngIf="isMusicPlaying" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
      <path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path>
      <path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path>
    </svg>
    <svg *ngIf="!isMusicPlaying" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
      <path d="M23 9l-2 2-2-2"></path>
      <path d="M19 13l2 2 2-2"></path>
    </svg>
  </button>
</main>
